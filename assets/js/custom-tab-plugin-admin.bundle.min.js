jQuery(document).ready(function(e){var n;e("#tabs-nav .tab:not(#add-tab-button)").on("click",function(){var t;e(this).hasClass("active")||(t=e(this).data("index"),e("#tabs-nav .tab").removeClass("active"),e(this).addClass("active"),e(".tab-content").hide(),e("#tab-"+t).show())}),e(".add-tab").on("click",function(){e("#add-tab-popup").fadeIn()}),e("#add-tab-form").on("submit",function(t){t.preventDefault();var o=e("#tab-title").val(),t={action:"add_tab",security:customTabsAjax.nonce,new_tab_name:o};e.post(customTabsAjax.ajaxurl,t,function(t){var i,n;t.success?(n='<li class="tab active" data-index="'+(i=t.data.new_tab_index)+'"><span class="tab-name">'+o+'</span><span class="remove-tab" data-index="'+i+'">x</span></li>',e(".tabs-nav .tab.active").removeClass("active"),e("#add-tab-button").before(n),e("#add-tab-popup").fadeOut(),e("#tab-title").val(""),e("#tab-content-wrapper").append(t.data.tab_content),e(".tab-content").hide(),e("#tab-"+i).show()):alert("Error adding tab. Please try again.")})}),e(".cancel-popup").on("click",function(){e("#add-tab-popup").fadeOut()}),e(document).on("click",".remove-tab",function(){var t=e(this).data("index"),t=(e('.tab[data-index="'+t+'"]').remove(),e("#tab-"+t).remove(),0<e('.tab[data-index="'+(t-1)+'"]').length&&(e('.tab[data-index="'+(t-1)+'"]').addClass("active"),e("#tab-"+(t-1)).fadeIn()),{action:"remove_tab",security:customTabsAjax.nonce,tab_index:t});e.post(customTabsAjax.ajaxurl,t,function(t){t.success||alert("Error removing tab. Please try again.")}).fail(function(){alert("Error removing tab. Please try again.")})}),e(document).on("click",".custom-image-upload",function(t){t.preventDefault();var t=e(this),i=t.siblings(".custom-image-url"),n=t.siblings(".custom-image-preview"),o=wp.media({title:"Select or Upload Media",button:{text:"Use this media"},multiple:!1});o.on("select",function(){var t=o.state().get("selection").first().toJSON();i.val(t.url),n.attr("src",t.url)}),o.open()}),tinymce.init({selector:".big-text",menubar:!1,toolbar:"bold italic underline | alignleft aligncenter alignright | bullist numlist outdent indent",height:150}),e(document).on("click",".custom-tabs-plugin__container__grid__item",function(){var t,i=e(this),n=i.closest(".tab-content");i.closest(".custom-tabs-plugin__container__grid__left-column").length?t="left":i.closest(".custom-tabs-plugin__container__grid__right-column").length&&(i.is(":nth-child(1)")?t="right_top":i.is(":nth-child(2)")&&(t="right_bottom")),"left"===t?(e("#left-column-tab-index").val(n.data("index")),e("#left-bg-color").val(n.find(".left-bg-color-input").val()),e("#left-bg-image").val(n.find(".left-bg-image-input").val()),e("#left-bg-image ~ img").attr("src",n.find(".left-bg-image-input").val()),e("#left-bg-image-mobile").val(n.find(".left-bg-image-mobile-input").val()),e("#left-bg-image-mobile ~ img").attr("src",n.find(".left-bg-image-mobile-input").val()),e("#left-comment").val(n.find(".left-comment-input").val()),tinymce.get("left-comment").setContent(n.find(".left-comment-input").val()),e("#left-individual-image").val(n.find(".left-individual-image-input").val()),e("#left-individual-image ~ img").attr("src",n.find(".left-individual-image-input").val()),e("#left-individual-position").val(n.find(".left-individual-position-input").val()),e("#left-individual-name").val(n.find(".left-individual-name-input").val()),e("#left-company-logo").val(n.find(".left-company-logo-input").val()),e("#left-company-logo ~ img").attr("src",n.find(".left-company-logo-input").val()),e("#left-rich-text").val(n.find(".left-rich-text-input").val()),e("#left-column-popup").fadeIn()):"right_top"===t?(e("#right-top-column-tab-index").val(n.data("index")),e("#right-top-bg-color").val(n.find(".right-top-bg-color-input").val()),e("#right-top-title").val(n.find(".right-top-title-input").val()),e("#right-top-description").val(n.find(".right-top-description-input").val()),e("#right-top-popup").fadeIn()):"right_bottom"===t&&(e("#right-bottom-column-tab-index").val(n.data("index")),e("#right-bottom-bg-color").val(n.find(".right-bottom-bg-color-input").val()),e("#right-bottom-description").val(n.find(".right-bottom-description-input").val()),e("#right-bottom-icon").val(n.find(".right-bottom-icon-input").val()),e("#right-bottom-icon ~ img").attr("src",n.find(".right-bottom-icon-input").val()),tinymce.get("right-bottom-description").setContent(n.find(".right-bottom-description-input").val()),e("#right-bottom-link").val(n.find(".right-bottom-link-input").val()),e("#right-bottom-popup").fadeIn())}),e("#left-column-form").on("submit",function(t){t.preventDefault();var i,n,t=e(this).serializeArray(),o={},t=(e.each(t,function(){o[this.name]=this.value}),e('.tab-content[data-index="'.concat(o["left-column-tab-index"],'"]'))),a=(t.find(".left-bg-color-input").val(o.left_bg_color),t.find(".left-bg-image-input").val(o["left-bg-image"]),t.find(".left-bg-image-mobile-input").val(o["left-bg-image-mobile"]),t.find(".left-comment-input").val(o.left_comment),t.find(".left-individual-image-input").val(o["left-individual-image"]),t.find(".left-individual-position-input").val(o.left_individual_name),t.find(".left-individual-name-input").val(o.left_individual_position),t.find(".left-company-logo-input").val(o["left-company-logo"]),i=(a=o)["left-column-tab-index"],""===a["left-bg-image"]&&""===a["left-bg-image-mobile"]&&""===a.left_comment&&""===a["left-individual-image"]&&""===a.left_individual_name&&""===a.left_individual_position&&""===a["left-company-logo"]||(n='\n    <div class="custom-tabs-plugin__container__grid__left-column__grid-item custom-tabs-plugin__container__grid__item" \n        style="'.concat(a.left_bg_color?"background-color: "+a.left_bg_color+";":""," \n               ").concat(a["left-bg-image"]?"background-image: url("+a["left-bg-image"]+");":"",'">\n  '),a["left-bg-image-mobile"]&&(n+="\n          <style>\n              @media (max-width: 768px) {\n                  .custom-tabs-plugin__container__grid__left-column__grid-item {\n                      background-image: url('".concat(a["left-bg-image-mobile"],"')!important;\n                  }\n              }\n          </style>\n      ")),n+='\n      <blockquote class="custom-tabs-plugin__container__grid__left-column__comment">\n          '.concat(a.left_comment,"\n      </blockquote>\n      \n  "),a["left-individual-image"]&&a.left_individual_position&&a.left_individual_name&&(n+='\n      <div class="custom-tabs-plugin__container__grid__left-column__person">\n          <img class="custom-tabs-plugin__container__grid__left-column__person__image" \n              src="'.concat(a["left-individual-image"],'" \n              alt="individual_image-').concat(i,'" />\n          <div class="custom-tabs-plugin__container__grid__left-column__person__info">\n            <span class="custom-tabs-plugin__container__grid__left-column__person__info__name">').concat(a.left_individual_position,'</span>\n            <span class="custom-tabs-plugin__container__grid__left-column__person__info__position">').concat(a.left_individual_name,"</span>\n          </div>\n        </div>\n      ")),a["left-company-logo"]&&(n+='\n          <img src="'.concat(a["left-company-logo"],'" \n              alt="company_logo_').concat(i,'" />\n      ')),n+="\n      </div>\n  </div>"),n);a&&t.find(".custom-tabs-plugin__container__grid__left-column").html(a),e("#left-column-popup").fadeOut()}),e("#right-top-form").on("submit",function(t){t.preventDefault();var i,t=e(this).serializeArray(),n={},t=(e.each(t,function(){n[this.name]=this.value}),e('.tab-content[data-index="'.concat(n["right-top-column-tab-index"],'"]'))),o=(t.find(".right-top-bg-color-input").val(n.right_top_bg_color),t.find(".right-top-title-input").val(n.right_top_title),t.find(".right-top-description-input").val(n.right_top_description),(i="")===(o=n).right_top_title&&""===o.right_top_description||(i+='<div class="custom-tabs-plugin__container__grid__right-column__grid-item custom-tabs-plugin__container__grid__right-column-top__grid-item custom-tabs-plugin__container__grid__item"',o.right_top_bg_color&&(i+=' style="background-color: '.concat(o.right_top_bg_color,';"')),i+='>\n        <div class="custom-tabs-plugin__container__grid__right-column-top__grid-item__title">',o.right_top_title&&(i+=o.right_top_title),i+="</div>\n        <p>",o.right_top_title&&(i+=o.right_top_description),i+="</p>\n        </div>"),i);o&&(t.find(".custom-tabs-plugin__container__grid__right-column-top__grid-item").remove(),t.find(".custom-tabs-plugin__container__grid__right-column-bottom__grid-item").before(o)),e("#right-top-popup").fadeOut()}),e("#right-bottom-form").on("submit",function(t){t.preventDefault();var i,n,t=e(this).serializeArray(),o={},t=(e.each(t,function(){o[this.name]=this.value}),e('.tab-content[data-index="'.concat(o["right-bottom-column-tab-index"],'"]'))),a=(t.find(".right-bottom-bg-color-input").val(o.right_bottom_bg_color),t.find(".right-bottom-description-input").val(o.right_bottom_description),t.find(".right-bottom-icon-input").val(o["right-bottom-icon"]),t.find(".right-bottom-link-input").val(o["right-bottom-link"]),i=(a=o)["right-bottom-column-tab-index"],(n="")===a.right_bottom_description&&""===a["right-bottom-icon"]&&""===a["right-bottom-link"]||(n+='<div class="custom-tabs-plugin__container__grid__right-column__grid-item  custom-tabs-plugin__container__grid__right-column-bottom__grid-item custom-tabs-plugin__container__grid__item"',a.right_bottom_bg_color&&(n+=' style="background-color: '.concat(a.right_bottom_bg_color,';"')),n=n+"><a>"+"<p>",a.right_bottom_description&&(n+=a.right_bottom_description),n+="</p>",a["right-bottom-icon"]&&(n+='<img class="custom-tabs-plugin__container__grid__right-column__grid-item__icon" src="'.concat(a["right-bottom-icon"],'" alt="icon_').concat(i,'" />')),n+="</a></div>"),n);a&&(t.find(".custom-tabs-plugin__container__grid__right-column-bottom__grid-item").remove(),t.find(".custom-tabs-plugin__container__grid__right-column-top__grid-item").after(a)),e("#right-bottom-popup").fadeOut()}),e(".cancel-popup, .custom-tabs-plugin__pop-up__overlay").on("click",function(){e(this).closest(".custom-tabs-plugin__pop-up").fadeOut()}),e(".add-brand").on("click",function(t){t.preventDefault(),n||(n=wp.media({title:"Select Logo",button:{text:"Use this logo"},multiple:!1})).on("select",function(){var t=n.state().get("selection").first().toJSON().url,i=e(".custom_tabs_plugin-brands__list_item").length,i=e('<li class="custom_tabs_plugin-brands__list_item"><img src="'+t+'" /><input type="hidden" name="custom_tabs_plugin_options_brands[brands]['+i+'][logo]" value="'+t+'" /><button class="remove-brand" type="button">&times;</button></li>');e(".custom_tabs_plugin-brands__list").append(i),console.log(i),n=null}),n.open()}),e(document).on("click",".remove-brand",function(){e(this).closest(".custom_tabs_plugin-brands__list_item").remove()})});