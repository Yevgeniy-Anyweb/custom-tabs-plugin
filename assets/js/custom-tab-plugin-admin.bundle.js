jQuery(document).ready((function(t){var i;t("#tabs-nav .tab:not(#add-tab-button)").on("click",(function(){if(!t(this).hasClass("active")){var i=t(this).data("index");t("#tabs-nav .tab").removeClass("active"),t(this).addClass("active"),t(".tab-content").hide(),t("#tab-"+i).show()}})),t(".add-tab").on("click",(function(){t("#add-tab-popup").fadeIn()})),t("#add-tab-form").on("submit",(function(i){i.preventDefault();var n=t("#tab-title").val(),o={action:"add_tab",security:customTabsAjax.nonce,new_tab_name:n};t.post(customTabsAjax.ajaxurl,o,(function(i){if(i.success){var o=i.data.new_tab_index,a='<li class="tab active" data-index="'+o+'"><span class="tab-name">'+n+'</span><span class="remove-tab" data-index="'+o+'">x</span></li>';t(".tabs-nav .tab.active").removeClass("active"),t("#add-tab-button").before(a),t("#add-tab-popup").fadeOut(),t("#tab-title").val(""),t("#tab-content-wrapper").append(i.data.tab_content),t(".tab-content").hide(),t("#tab-"+o).show()}else alert("Error adding tab. Please try again.")}))})),t(".cancel-popup").on("click",(function(){t("#add-tab-popup").fadeOut()})),t(document).on("click",".remove-tab",(function(){var i=t(this).data("index");t('.tab[data-index="'+i+'"]').remove(),t("#tab-"+i).remove(),t('.tab[data-index="'+(i-1)+'"]').length>0&&(t('.tab[data-index="'+(i-1)+'"]').addClass("active"),t("#tab-"+(i-1)).fadeIn());var n={action:"remove_tab",security:customTabsAjax.nonce,tab_index:i};t.post(customTabsAjax.ajaxurl,n,(function(t){t.success||alert("Error removing tab. Please try again.")})).fail((function(){alert("Error removing tab. Please try again.")}))})),t(document).on("click",".custom-image-upload",(function(i){i.preventDefault();var n=t(this),o=n.siblings(".custom-image-url"),a=n.siblings(".custom-image-preview"),e=wp.media({title:"Select or Upload Media",button:{text:"Use this media"},multiple:!1});e.on("select",(function(){var t=e.state().get("selection").first().toJSON();o.val(t.url),a.attr("src",t.url)})),e.open()})),tinymce.init({selector:".big-text",menubar:!1,toolbar:"bold italic underline | alignleft aligncenter alignright | bullist numlist outdent indent",height:150}),t(document).on("click",".custom-tabs-plugin__container__grid__item",(function(){var i,n=t(this),o=n.closest(".tab-content");n.closest(".custom-tabs-plugin__container__grid__left-column").length?i="left":n.closest(".custom-tabs-plugin__container__grid__right-column").length&&(n.is(":nth-child(1)")?i="right_top":n.is(":nth-child(2)")&&(i="right_bottom")),"left"===i?(t("#left-column-tab-index").val(o.data("index")),t("#left-bg-color").val(o.find(".left-bg-color-input").val()),t("#left-bg-image").val(o.find(".left-bg-image-input").val()),t("#left-bg-image ~ img").attr("src",o.find(".left-bg-image-input").val()),t("#left-bg-image-mobile").val(o.find(".left-bg-image-mobile-input").val()),t("#left-bg-image-mobile ~ img").attr("src",o.find(".left-bg-image-mobile-input").val()),t("#left-comment").val(o.find(".left-comment-input").val()),tinymce.get("left-comment").setContent(o.find(".left-comment-input").val()),t("#left-individual-image").val(o.find(".left-individual-image-input").val()),t("#left-individual-image ~ img").attr("src",o.find(".left-individual-image-input").val()),t("#left-individual-position").val(o.find(".left-individual-position-input").val()),t("#left-individual-name").val(o.find(".left-individual-name-input").val()),t("#left-company-logo").val(o.find(".left-company-logo-input").val()),t("#left-company-logo ~ img").attr("src",o.find(".left-company-logo-input").val()),t("#left-rich-text").val(o.find(".left-rich-text-input").val()),t("#left-column-popup").fadeIn()):"right_top"===i?(t("#right-top-column-tab-index").val(o.data("index")),t("#right-top-bg-color").val(o.find(".right-top-bg-color-input").val()),t("#right-top-title").val(o.find(".right-top-title-input").val()),t("#right-top-description").val(o.find(".right-top-description-input").val()),t("#right-top-popup").fadeIn()):"right_bottom"===i&&(t("#right-bottom-column-tab-index").val(o.data("index")),t("#right-bottom-bg-color").val(o.find(".right-bottom-bg-color-input").val()),t("#right-bottom-description").val(o.find(".right-bottom-description-input").val()),t("#right-bottom-icon").val(o.find(".right-bottom-icon-input").val()),t("#right-bottom-icon ~ img").attr("src",o.find(".right-bottom-icon-input").val()),tinymce.get("right-bottom-description").setContent(o.find(".right-bottom-description-input").val()),t("#right-bottom-link").val(o.find(".right-bottom-link-input").val()),t("#right-bottom-popup").fadeIn())})),t("#left-column-form").on("submit",(function(i){i.preventDefault();var n=t(this).serializeArray(),o={};t.each(n,(function(){o[this.name]=this.value}));var a=t('.tab-content[data-index="'.concat(o["left-column-tab-index"],'"]'));a.find(".left-bg-color-input").val(o.left_bg_color),a.find(".left-bg-image-input").val(o["left-bg-image"]),a.find(".left-bg-image-mobile-input").val(o["left-bg-image-mobile"]),a.find(".left-comment-input").val(o.left_comment),a.find(".left-individual-image-input").val(o["left-individual-image"]),a.find(".left-individual-position-input").val(o.left_individual_name),a.find(".left-individual-name-input").val(o.left_individual_position),a.find(".left-company-logo-input").val(o["left-company-logo"]);var e=function(t,i){var n;return""===t["left-bg-image"]&&""===t["left-bg-image-mobile"]&&""===t.left_comment&&""===t["left-individual-image"]&&""===t.left_individual_name&&""===t.left_individual_position&&""===t["left-company-logo"]||(n='\n    <div class="custom-tabs-plugin__container__grid__left-column__grid-item custom-tabs-plugin__container__grid__item" \n        style="'.concat(t.left_bg_color?"background-color: "+t.left_bg_color+";":""," \n               ").concat(t["left-bg-image"]?"background-image: url("+t["left-bg-image"]+");":"",'">\n  '),t["left-bg-image-mobile"]&&(n+="\n          <style>\n              @media (max-width: 768px) {\n                  .custom-tabs-plugin__container__grid__left-column__grid-item {\n                      background-image: url('".concat(t["left-bg-image-mobile"],"')!important;\n                  }\n              }\n          </style>\n      ")),n+='\n      <blockquote class="custom-tabs-plugin__container__grid__left-column__comment">\n          '.concat(t.left_comment,"\n      </blockquote>\n      \n  "),t["left-individual-image"]&&t.left_individual_position&&t.left_individual_name&&(n+='\n      <div class="custom-tabs-plugin__container__grid__left-column__person">\n          <img class="custom-tabs-plugin__container__grid__left-column__person__image" \n              src="'.concat(t["left-individual-image"],'" \n              alt="individual_image-').concat(i,'" />\n          <div class="custom-tabs-plugin__container__grid__left-column__person__info">\n            <span class="custom-tabs-plugin__container__grid__left-column__person__info__name">').concat(t.left_individual_position,'</span>\n            <span class="custom-tabs-plugin__container__grid__left-column__person__info__position">').concat(t.left_individual_name,"</span>\n          </div>\n        </div>\n      ")),t["left-company-logo"]&&(n+='\n          <img src="'.concat(t["left-company-logo"],'" \n              alt="company_logo_').concat(i,'" />\n      ')),n+="\n      </div>\n  </div>"),n}(o,o["left-column-tab-index"]);e&&a.find(".custom-tabs-plugin__container__grid__left-column").html(e),t("#left-column-popup").fadeOut()})),t("#right-top-form").on("submit",(function(i){i.preventDefault();var n=t(this).serializeArray(),o={};t.each(n,(function(){o[this.name]=this.value}));var a=t('.tab-content[data-index="'.concat(o["right-top-column-tab-index"],'"]'));a.find(".right-top-bg-color-input").val(o.right_top_bg_color),a.find(".right-top-title-input").val(o.right_top_title),a.find(".right-top-description-input").val(o.right_top_description);var e=function(t){var i="";return""===t.right_top_title&&""===t.right_top_description||(i+='<div class="custom-tabs-plugin__container__grid__right-column__grid-item custom-tabs-plugin__container__grid__right-column-top__grid-item custom-tabs-plugin__container__grid__item"',t.right_top_bg_color&&(i+=' style="background-color: '.concat(t.right_top_bg_color,';"')),i+='>\n        <div class="custom-tabs-plugin__container__grid__right-column-top__grid-item__title">',t.right_top_title&&(i+=t.right_top_title),i+="</div>\n        <p>",t.right_top_title&&(i+=t.right_top_description),i+="</p>\n        </div>"),i}(o,o["right-top-column-tab-index"]);e&&(a.find(".custom-tabs-plugin__container__grid__right-column-top__grid-item").remove(),a.find(".custom-tabs-plugin__container__grid__right-column-bottom__grid-item").before(e)),t("#right-top-popup").fadeOut()})),t("#right-bottom-form").on("submit",(function(i){i.preventDefault();var n=t(this).serializeArray(),o={};t.each(n,(function(){o[this.name]=this.value}));var a=t('.tab-content[data-index="'.concat(o["right-bottom-column-tab-index"],'"]'));a.find(".right-bottom-bg-color-input").val(o.right_bottom_bg_color),a.find(".right-bottom-description-input").val(o.right_bottom_description),a.find(".right-bottom-icon-input").val(o["right-bottom-icon"]),a.find(".right-bottom-link-input").val(o["right-bottom-link"]);var e=function(t,i){var n="";return""===t.right_bottom_description&&""===t["right-bottom-icon"]&&""===t["right-bottom-link"]||(n+='<div class="custom-tabs-plugin__container__grid__right-column__grid-item  custom-tabs-plugin__container__grid__right-column-bottom__grid-item custom-tabs-plugin__container__grid__item"',t.right_bottom_bg_color&&(n+=' style="background-color: '.concat(t.right_bottom_bg_color,';"')),n+="><a>",n+="<p>",t.right_bottom_description&&(n+=t.right_bottom_description),n+="</p>",t["right-bottom-icon"]&&(n+='<img class="custom-tabs-plugin__container__grid__right-column__grid-item__icon" src="'.concat(t["right-bottom-icon"],'" alt="icon_').concat(i,'" />')),n+="</a></div>"),n}(o,o["right-bottom-column-tab-index"]);e&&(a.find(".custom-tabs-plugin__container__grid__right-column-bottom__grid-item").remove(),a.find(".custom-tabs-plugin__container__grid__right-column-top__grid-item").after(e)),t("#right-bottom-popup").fadeOut()})),t(".cancel-popup, .custom-tabs-plugin__pop-up__overlay").on("click",(function(){t(this).closest(".custom-tabs-plugin__pop-up").fadeOut()})),t(".add-brand").on("click",(function(n){n.preventDefault(),i||(i=wp.media({title:"Select Logo",button:{text:"Use this logo"},multiple:!1})).on("select",(function(){var n=i.state().get("selection").first().toJSON().url,o=t(".custom_tabs_plugin-brands__list_item").length,a=t('<li class="custom_tabs_plugin-brands__list_item"><img src="'+n+'" /><input type="hidden" name="custom_tabs_plugin_options_brands[brands]['+o+'][logo]" value="'+n+'" /><button class="remove-brand" type="button">&times;</button></li>');t(".custom_tabs_plugin-brands__list").append(a),console.log(a),i=null})),i.open()})),t(document).on("click",".remove-brand",(function(){t(this).closest(".custom_tabs_plugin-brands__list_item").remove()}))}));